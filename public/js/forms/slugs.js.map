{"version":3,"sources":["slugs.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"slugs.js","sourcesContent":["(function (Soda) {\n    var elements = {\n        textField: '[data-slug]',\n        generateSlugButton: '[data-slug-generate]',\n        generateExternalButton: '[data-slug-external]',\n    };\n\n    var generate = function(text, allowExternal) {\n        if (!allowExternal || (text.substr(0, 4) !== 'http' && text.indexOf('://') == -1)) {\n            text = text.toString().toLowerCase()\n                .replace(/<(?:.|\\n)*?>/gm, '')         // remove html tags\n                .replace(/\\s+/g, '-')                  // Replace spaces with -\n                .replace(/[^\\w\\-\\/\\%\\+\\?\\[\\]]+/g, '')  // Remove all non-word chars\n                .replace(/\\-\\-+/g, '-')                // Replace multiple - with single -\n                .replace(/\\/\\/+/g, '/')                // Replace multiple / with single /\n                .replace(/^-+/, '')                    // Trim - from start of text\n                .replace(/-+$/, '');                   // Trim - from end of text\n\n            if(text.substring(0,1) != '/') {\n                text = '/' + text;\n            }\n        }\n\n        return text;\n    };\n\n    var prefix = function (text, prefix) {\n        // If the last character is not a slash append a slash to it.\n        if (prefix && prefix.substr(-1) != '/') {\n            prefix = prefix + '/';\n        }\n\n        return generate(prefix + text);\n    };\n\n    var external = function () {\n        var link  = prompt(\"Enter external URL\", \"http://\");\n        return (link.indexOf('://') == -1) ? 'http://' + link : link;\n    };\n\n    var _registerEvents = function () {\n        $(elements.textField).on('keyup', function () {\n            var text = $(this).val();\n            var allowExternal = $(this).data('slug') == true;\n\n            var filteredText = Soda.slugs.generate(text, allowExternal);\n\n            if(filteredText !== text) {\n                $(this).val(filteredText);\n            }\n        });\n\n        $(elements.generateSlugButton).on('click', function () {\n            var target = $(this).data('slug-generate');\n            var from = $(this).data('slug-generate-from');\n\n            var prefix = $(target).data('slug-prefix');\n            var title = $(from).val();\n\n            $(target).val(Soda.slugs.prefix(title, prefix));\n        });\n\n        $(elements.generateExternalButton).on('click', function () {\n            var target = $(this).data('slug-external');\n\n            $(target).val(Soda.slugs.external());\n        });\n    };\n\n    $(function(){\n        _registerEvents();\n    })\n\n    Soda.slugs = {\n        elements: elements,\n        generate: generate,\n        prefix: prefix,\n        external: external,\n    };\n\n    return Soda;\n\n})(Soda || {});\n"]}