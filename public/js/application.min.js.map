{"version":3,"sources":["application.js"],"names":["slugify","text","toString","toLowerCase","replace","substring","post","path","parameters","form","$","attr","each","key","value","field","append","document","body","submit","ajaxSetup","headers","X-CSRF-TOKEN","css","window","height","on","this","val","allowExternal","data","substr","indexOf","slug","target","from","prefix","title","link","prompt","e","preventDefault","url","attributes","_method","_token","swal","type","showCancelButton","confirmButtonClass","confirmButtonText","closeOnConfirm"],"mappings":"AAyEA,QAASA,SAAQC,GAYb,MAXAA,GAAOA,EAAKC,WAAWC,cAClBC,QAAQ,OAAQ,KAChBA,QAAQ,wBAAyB,IACjCA,QAAQ,SAAU,KAClBA,QAAQ,MAAO,IACfA,QAAQ,MAAO,IAEM,KAAvBH,EAAKI,UAAU,EAAE,KAChBJ,EAAO,IAAMA,GAGVA,EAGX,QAASK,MAAKC,EAAMC,GAChB,GAAIC,GAAOC,EAAE,gBAEbD,GAAKE,KAAK,SAAU,QACpBF,EAAKE,KAAK,SAAUJ,GAEpBG,EAAEE,KAAKJ,EAAY,SAASK,EAAKC,GAC7B,GAAIC,GAAQL,EAAE,kBAEdK,GAAMJ,KAAK,OAAQ,UACnBI,EAAMJ,KAAK,OAAQE,GACnBE,EAAMJ,KAAK,QAASG,GAEpBL,EAAKO,OAAOD,KAKhBL,EAAEO,SAASC,MAAMF,OAAOP,GACxBA,EAAKU,SA3GTT,EAAE,WACEA,EAAEU,WACEC,SACIC,eAAgBZ,EAAE,2BAA2BC,KAAK,cAI1DD,EAAE,gCAAgCa,IAAI,aAAcb,EAAEc,QAAQC,UAE9Df,EAAE,eAAegB,GAAG,QAAS,WACzB,GAAIzB,GAAOS,EAAEiB,MAAMC,MACfC,EAAwC,GAAxBnB,EAAEiB,MAAMG,KAAK,OAEjC,KAAKD,GAAwC,SAAtB5B,EAAK8B,OAAO,EAAG,IAAiB9B,EAAK+B,QAAQ,WAAe,CAC/E,GAAIC,GAAOjC,QAAQC,EAChBgC,KAAShC,GACRS,EAAEiB,MAAMC,IAAIK,MAKxBvB,EAAE,wBAAwBgB,GAAG,QAAS,WAClC,GAAIQ,GAASxB,EAAEiB,MAAMG,KAAK,iBACtBK,EAAOzB,EAAEiB,MAAMG,KAAK,sBACpBM,EAAS1B,EAAEwB,GAAQJ,KAAK,eACxBO,EAAQ3B,EAAEyB,GAAMP,KAGhBQ,IAA+B,KAArBA,EAAOL,aACjBK,GAAkB,KAGtBC,EAAQA,EAAMjC,QAAQ,iBAAkB,IAExCM,EAAEwB,GAAQN,IAAI5B,QAAQoC,EAASC,MAGnC3B,EAAE,wBAAwBgB,GAAG,QAAS,WAClC,GAAIQ,GAASxB,EAAEiB,MAAMG,KAAK,gBAC1BQ,MAAOC,OAAO,qBAAsB,WACpCD,KAAQA,KAAKN,QAAQ,WAAgB,UAAYM,KAAOA,KAExD5B,EAAEwB,GAAQN,IAAIU,QAGlB5B,EAAE,kBAAkBgB,GAAG,QAAS,WAC5B,GAAIjB,GAAOC,EAAEiB,MAAMG,KAAK,UACxBpB,GAAED,GAAMU,WAGZT,EAAE,wBAAwBgB,GAAG,QAAS,SAASc,GAC3CA,EAAEC,gBAEF,IAAIC,GAAMhC,EAAEiB,MAAMhB,KAAK,QACnBgC,GACAC,QAAS,SACTC,OAAQnC,EAAE,2BAA2BC,KAAK,WAG9CmC,OACIT,MAAO,gBACPpC,KAAM,mCACN8C,KAAM,UACNC,kBAAkB,EAClBC,mBAAoB,aACpBC,kBAAmB,kBACnBC,gBAAgB,GACjB,WACC7C,KAAKoC,EAAKC","file":"application.min.js","sourcesContent":["$(function () {\n    $.ajaxSetup({\n        headers: {\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        }\n    });\n\n    $('.soda-wrapper, .main-content').css('min-height', $(window).height());\n\n    $('[data-slug]').on('keyup', function () {\n        var text = $(this).val();\n        var allowExternal = $(this).data('slug') == true;\n\n        if (!allowExternal || (text.substr(0, 4) !== 'http' && text.indexOf('://') == -1)) {\n            var slug = slugify(text);\n            if(slug !== text) {\n                $(this).val(slug);\n            }\n        }\n    });\n\n    $('[data-slug-generate]').on('click', function () {\n        var target = $(this).data('slug-generate');\n        var from = $(this).data('slug-generate-from');\n        var prefix = $(target).data('slug-prefix');\n        var title = $(from).val();\n\n        // If the last character is not a slash append a slash to it.\n        if (prefix && prefix.substr(-1) != '/') {\n            prefix = prefix + '/';\n        }\n\n        title = title.replace(/<(?:.|\\n)*?>/gm, ''); // remove html tags\n\n        $(target).val(slugify(prefix + title));\n    });\n\n    $('[data-slug-external]').on('click', function () {\n        var target = $(this).data('slug-external');\n        link = prompt(\"Enter external URL\", \"http://\");\n        link = (link.indexOf('://') == -1) ? 'http://' + link : link;\n\n        $(target).val(link);\n    });\n\n    $('[data-submits]').on('click', function() {\n        var form = $(this).data('submits');\n        $(form).submit();\n    });\n\n    $('[data-delete-button]').on('click', function(e) {\n        e.preventDefault();\n\n        var url = $(this).attr('href');\n        var attributes = {\n            _method: 'DELETE',\n            _token: $('meta[name=\"csrf-token\"]').attr('content'),\n        }\n\n        swal({\n            title: \"Are you sure?\",\n            text: \"This action can not be reversed!\",\n            type: \"warning\",\n            showCancelButton: true,\n            confirmButtonClass: \"btn-danger\",\n            confirmButtonText: \"Yes, delete it!\",\n            closeOnConfirm: false\n        }, function(){\n            post(url, attributes);\n        });\n    });\n});\n\nfunction slugify(text) {\n    text = text.toString().toLowerCase()\n        .replace(/\\s+/g, '-')           // Replace spaces with -\n        .replace(/[^\\w\\-\\/\\%\\+\\?\\[\\]]+/g, '')       // Remove all non-word chars\n        .replace(/\\-\\-+/g, '-')         // Replace multiple - with single -\n        .replace(/^-+/, '')             // Trim - from start of text\n        .replace(/-+$/, '');            // Trim - from end of text\n\n    if(text.substring(0,1) != '/') {\n        text = '/' + text;\n    }\n\n    return text;\n}\n\nfunction post(path, parameters) {\n    var form = $('<form></form>');\n\n    form.attr(\"method\", \"post\");\n    form.attr(\"action\", path);\n\n    $.each(parameters, function(key, value) {\n        var field = $('<input></input>');\n\n        field.attr(\"type\", \"hidden\");\n        field.attr(\"name\", key);\n        field.attr(\"value\", value);\n\n        form.append(field);\n    });\n\n    // The form needs to be a part of the document in\n    // order for us to be able to submit it.\n    $(document.body).append(form);\n    form.submit();\n}\n"]}