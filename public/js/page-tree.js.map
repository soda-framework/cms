{"version":3,"sources":["page-tree.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"page-tree.js","sourcesContent":["(function (Soda) {\n    var elements = {\n        tree: '#page-tree',\n        row: '.tree-row',\n        toleranceElement: '> .tree-item',\n        handle: '> .tree-item > .handle',\n        minify: '.minify',\n    }\n\n    var classes = {\n        branchClass: 'has-sub-items',\n        collapsedClass: 'collapsed',\n        disableNestingClass: false,\n        errorClass: false,\n        expandedClass: 'expanded',\n        hoveringClass: false,\n        placeholder: 'tree-item hovering',\n        leafClass: false,\n        disabledClass: false,\n    }\n\n    var _registerEvents = function () {\n        var parameters = $.extend({}, {\n            handle: elements.handle,\n            items: 'li',\n            listType: 'ul',\n            toleranceElement: '> .tree-item',\n            isTree: true,\n            protectRoot: true,\n            startCollapsed: true,\n            expandOnHover: 300,\n            tabSize: 75,\n            relocate: function(event, item) {\n                _moveNode(item.item);\n            },\n        }, classes);\n\n        $(elements.tree).nestedSortable(parameters);\n\n        $(elements.minify).on('click', function (e) {\n            e.preventDefault();\n\n            $(this).closest(elements.row).toggleClass(classes.collapsedClass).toggleClass(classes.expandedClass);\n        });\n    }\n\n    var _moveNode = function($item) {\n        var itemId = $item.data('id');\n        var parent = $item.parent().closest(elements.row);\n        var parentId = parent.data('id');\n\n        if (typeof parentId !== 'undefined') {\n\n            var $previous = $item.prev();\n            var $next = $item.next();\n\n            var data = {\n                entityName: 'pages',\n                id: itemId\n            }\n\n            if ($previous.length > 0) {\n                data.type = 'moveAfter';\n                data.positionEntityId = $previous.data('id');\n                Soda.changePosition(data);\n            } else if ($next.length > 0) {\n                data.type = 'moveBefore';\n                data.positionEntityId = $next.data('id');\n                Soda.changePosition(data);\n            } else {\n                data.type = 'moveInto';\n                data.positionEntityId = parentId;\n                Soda.changePosition(data);\n            }\n\n            $item.data('parent-id')\n        }\n    }\n\n    $(function(){\n        _registerEvents();\n    })\n\n    Soda.pageTree = {\n        elements: elements,\n        classes: classes,\n    };\n\n    return Soda;\n\n})(Soda || {});\n"]}