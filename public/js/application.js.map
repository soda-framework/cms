{"version":3,"sources":["application.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"application.js","sourcesContent":["// https://toddmotto.com/mastering-the-module-pattern/\n\nvar Soda = (function () {\n    var _initialized = false;\n    var _debug = false;\n\n    var elements = {\n        deleteButtons: '[data-delete-button]',\n        formSubmitters: '[data-submits]',\n    }\n\n    var _log = function (message) {\n        if(_debug === true) {\n            console.log(message);\n        }\n    }\n\n    var _getCsrf = function(){\n        return $('meta[name=\"csrf-token\"]').attr('content')\n    }\n\n    var _post = function(url, parameters) {\n        var form = $('<form></form>');\n\n        form.attr(\"method\", \"POST\");\n        form.attr(\"action\", url);\n\n        $.each(parameters, function(key, value) {\n            var field = $('<input></input>');\n\n            field.attr(\"type\", \"hidden\");\n            field.attr(\"name\", key);\n            field.attr(\"value\", value);\n\n            form.append(field);\n        });\n\n        // The form needs to be a part of the document in\n        // order for us to be able to submit it.\n        $(document.body).append(form);\n        form.submit();\n    };\n\n    var _registerEvents = function() {\n        $(elements.deleteButtons).on('click', function(e) {\n            e.preventDefault();\n            confirmDelete($(this));\n        });\n\n        $(elements.formSubmitters).on('click', function() {\n            var form = $(this).data('submits');\n\n            if($(this).data('publishes') != null) {\n                $(form).find('input[name=\"status\"]').val(1);\n            }\n\n            $(form).submit();\n        });\n    }\n\n    var initialize = function() {\n        if(_initialized === false) {\n            _initialized = true;\n\n            $.ajaxSetup({\n                headers: {\n                    'X-CSRF-TOKEN': _getCsrf()\n                }\n            });\n\n            $('.soda-wrapper, .main-content').css('min-height', $(window).height());\n            $(\".nav-item-group.active .collapse\").collapse('show');\n\n            if(Soda.queryString.tab) {\n                $('a[href=\"#tab_' + Soda.queryString.tab + '\"]').tab('show');\n            } else {\n                $('.nav-tabs a[data-toggle=\"tab\"]').first().tab('show');\n            }\n\n            _registerEvents();\n        }\n    };\n\n    var confirmDelete = function(element, attributes) {\n        var url = element.attr('href');\n        var postData = $.extend({}, {_token: _getCsrf(), _method: 'DELETE'}, attributes);\n\n        swal({\n            title: \"Are you sure?\",\n            text: \"This action can not be reversed!\",\n            type: \"warning\",\n            showCancelButton: true,\n            confirmButtonClass: \"btn-danger\",\n            confirmButtonText: \"Yes, delete it!\",\n            closeOnConfirm: false\n        }, function(){\n            if(url) {\n                _post(url, postData);\n            } else {\n                element.closest('form').submit();\n            }\n        });\n    };\n\n    var changePosition = function(requestData){\n        $.ajax({\n            'url':  Soda.urls.sort,\n            'type': 'POST',\n            'data': requestData,\n            'success': function(data) {\n                if (data.errors) {\n                    _log(data.errors);\n                }\n            },\n            'error': function(){\n                _log('Something went wrong!');\n            }\n        });\n    }\n\n    return {\n        initialize: initialize,\n        confirmDelete: confirmDelete,\n        changePosition: changePosition,\n    }\n})();\n\n$(function () {\n    Soda.initialize();\n});\n"]}